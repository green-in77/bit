<!DOCTYPE html>
<html lang="kr">
    <head>
        <meta charset="utf-8">
        <title>15 마운트 요소 외의 이벤트 조작</title>
    </head>
    <script src="https://cdn.jsdelivr.net/npm/smooth-scroll@12.1.5"></script>
    <body>
        <div id="app">
            <p>{{ page100 }}</p>
            <header :class="{ compact : scrollY > 200 }">
                200px 이상 스크롤했으면, .compact 클래스 추가하기
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
            </header>
            <hr>
            
            <p>{{ page102 }}</p>
            <div class="content">...</div>
            <div v-on:click="scrollTop">
              페이지 상단으로 이동하기
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <!-- cdn 방식으로 vue 사용-->
        <script>
            var scroll = new SmoothScroll()
            new Vue({
                el: '#app',
                data: {
                    page100 :'<p.100> ◆스크롤 이벤트 추출하기',
                    page102 :'<p.102> ◆스무스 스크롤 구현하기',
                    scrollY: 0,
                    timer: null
                },
                created: function () {
                    // 핸들러 등록하기
                    window.addEventListener('scroll', this.handleScroll)
                },
                beforeDestroy: function () {
                    // 핸들러 제거하기(컴포넌트 또는 SPA의 경우 절대 잊지 말아 주세요!)
                    window.removeEventListener('scroll', this.handleScroll)
                },
                methods: {
                    // 위화감을 느끼지 않을 200ms 간격으로 scroll 데이터를 변경하는 예
                    handleScroll: function () {
                    if (this.timer === null) {
                        this.timer = setTimeout(function () {
                        this.scrollY = window.scrollY
                        clearTimeout(this.timer)
                        this.timer = null
                        }.bind(this), 200)
                    }
                    },
                    scrollTop: function () {
                        scroll.animateScroll(0)
                    }
                }
            })            
        </script>
    </body>
</html>